<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><title>es6/math | Title</title><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">es6/math</h1><a id="logo" href="/.">Title</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">es6/math</h1><div class="post-meta"><a href="/2020/02/23/es6/math/#comments" class="comment-count"></a><p><span class="date">Feb 23, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Hits</i></i></span></p></div><div class="post-content"><p><strong>1. 如何判断一个值是否为NaN？运行环境内建的方法isNaN()有坑</strong><br>第一种，根据上面的实验，我们可以先判断输入参数的类型是否为number，再调用isNaN方法，这样就避免了对于非数字类型的判断错误。代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="built_in">Number</span>.isNaN)&#123;</span><br><span class="line">    <span class="built_in">Number</span>.isNaN = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="keyword">typeof</span> n === <span class="string">'number'</span> &amp;&amp; <span class="built_in">window</span>.isNaN(n)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="number">5</span>*<span class="string">'abc'</span>);    <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="string">'what?'</span>);    <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>第二种，利用NaN的一个特性，它是JS语言中唯一一个不等于他本身的值，所以我们也可以这么写。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="built_in">Number</span>.isNaN)&#123;</span><br><span class="line">    <span class="built_in">Number</span>.isNaN = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n !== n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="number">5</span>*<span class="string">'abc'</span>);    <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="string">'what?'</span>);    <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>还有一种，可以利用ES6中提供的Object.is()方法来进行验证</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="number">5</span>*<span class="string">'abc'</span>, <span class="literal">NaN</span>);    <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="string">'what?'</span>, <span class="literal">NaN</span>);    <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p><strong>2. 如何判断两个浮点数相等？如fn(0.1+0.2 , 0.3) =&gt; { /<em>返回true</em>/}</strong><br>Number.EPSILON 属性表示 1 与大于 1 的最小浮点数之间的差。<br>es6之前的版本：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="built_in">Number</span>.EPSILON)&#123;</span><br><span class="line">    <span class="built_in">Number</span>.EPSILON = <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">-52</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以使用Number.EPSILON来比较连个值是否相等（在指定的误差范围内）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.abs(<span class="number">0.1</span> - <span class="number">0.3</span> + <span class="number">0.2</span>) &lt; <span class="built_in">Number</span>.EPSILON</span><br></pre></td></tr></table></figure>
<p><strong>3. 如何检测一个值是否整数？</strong><br>要检测一个值是否为整数，可以使用Es6的Number.isInterge(…)方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.isInterger(<span class="number">1.000</span>);        <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Number</span>.isInterger(<span class="number">1</span>);        <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Number</span>.isInterger(<span class="string">'1'</span>);        <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>如果不允许使用ES6的话，可以自行写一个pollyFill方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(!Number.isInterger)&#123;</span><br><span class="line">    Number.isInterger &#x3D; function(num)&#123;</span><br><span class="line">        return (typeof num &#x3D;&#x3D;&#x3D; &#39;number&#39;) &amp;&amp; num%1 &#x3D;&#x3D;&#x3D; 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4. 对于一个数字进行取整，你能说出多少种方法？</strong><br><code>8.84|0;       //8</code><br><code>~~8.84;        //8</code><br><code>8.84&gt;&gt;0;       //8</code><br>这三种方法都是可以的，分别说一下：</p>
<p>8.84|0或者 写成0 | 8.84 都是一样的，从语法上看，他是让0与指定值进行按位“或”运算，在JavaScript中，它先对指定值执行了ToInt32的转换，在按位进行或运算，所以最终结果就是把指定值转换为32位的整数。</p>
<p>而~~8.84也是对变量进行ToInt32的转换；再进行一步按位“取非”运算，即对每个字节进行反转；然后，再对结果再次“取非”。</p>
<p>那么8.84&gt;&gt;0的操作就同理可证了……</p>
<p>但是，上面的三种方法也是有其局限性的，因为他们是遵循ToInt32的转化规范，所以他们也只能对于32位的数字进行转换，所以再加上一个符号位，那么他们所能处理的数字范围在2的正负31次幂之间，即-2147483648 ≤ x ≤ 2147483647。<br><strong>5. 当一个变量显式类型转换时（利用Number()方法），遵循的规则是什么？</strong><br>ES5规范中规定了这个抽象操作ToNumber。</p>
<p>对于布尔型：true的结果为1，false的结果为0；</p>
<p>对于undefined： 结果为NaN</p>
<p>对于null：结果为0</p>
<p>对于字符串类型：遵循数字常量的相关规则和语法。处理失败时会返回NaN。</p>
<p>对于复杂类型：会先调用该值得valueOf()方法，如果有并且返回基本类型之，就是用该值进行强制类型转换。如果没有就是使用toString()的返回来进行强制类型转换。<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test1 = &#123;</span><br><span class="line">    valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">10</span>;	<span class="comment">//valueOf方法的将被调用；</span></span><br><span class="line">	&#125;,</span><br><span class="line">	toString: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">666</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>(test1) ;   <span class="comment">//10</span></span><br><span class="line"><span class="number">2</span>*test1;    <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>(test2);    <span class="comment">//666</span></span><br><span class="line"><span class="built_in">Number</span>(test2)/<span class="number">2</span>;    <span class="comment">//333</span></span><br></pre></td></tr></table></figure><br><strong>6. Number([])和Number([1,2,3])的值分别是什么？说明其原理？</strong><br>先调用valueOf()，再调用toString()方法，那么空数组和[1,2,3]有什么区别呢？</p>
<p>因为数字的valueOf()方法返回的是数组本身，不是一个基本类型，所以还会调用toString()方法；而数组的toString()方法返回的是数组各项通过逗号拼接一起的字符串（可以理解调用了Array.prototype.join(“,”)方法），所以空数组返回空字符串，转换为数组自然就是0；而数组[1,2,3]则只能转换为NaN了.</p>
<p>那么，大家觉得下面的代码应该输出什么呢？为什么？<br><code>Number([100]);    //???</code><br><strong>7. 讲一讲parseInt()方法遵循的运算规则？</strong><br><code>parseInt(&#39;52px&#39;);        //52</code><br><code>parseInt(string, radix);</code>方法的接受两个参数：</p>
<p>string：<br>要被解析的值。如果参数不是一个字符串，则将其转换为字符串(使用 ToString 抽象操作)。字符串开头的空白符将会被忽略。</p>
<p>radix：<br>一个介于2和36之间的整数(数学系统的基础)，表示上述字符串的基数。比如参数”10”表示使用我们通常使用的十进制数值系统。始终指定此参数可以消除阅读该代码时的困惑并且保证转换结果可预测。当未指定基数时，不同的实现会产生不同的结果，通常将值默认为10。</p>
<p>返回值：</p>
<p>返回解析后的整数值。 如果被解析参数的第一个字符无法被转化成数值类型，则返回 NaN。</p>
<p>如果 parseInt 遇到了不属于radix参数所指定的基数中的字符那么该字符和其后的字符都将被忽略。接着返回已经解析的整数部分。</p>
<p>所以，这里就明白为什么字符串’52px’会被parseInt()解析为52，因为没有传递第二个参数radix，所以默认按照10进制进行解析，而字符’p’不在10进制内，所以字符’p’和后面的字符全部被忽略，直接返回数字52.</p>
<p>如果不亲自一试，你绝不会相信上面代码的输出是18。<br><code>parseInt(1/0, 19);    //18</code><br>这里需要知道的是，1/0运算结果是“无穷”，在JavaScript中为Infinity，而这个Infinity转换为字符串则为’Infinity’，第一个字符是’I’，在以19为基数时他的值为18。第二个字符‘n’不是一个有效的数字字符，所以除第一个字符外，后面的字符全部被忽略，所以最后就返回了18。</p>
</div><div class="post-copyright"><blockquote><p>Original author: just coding</p><p>Original link: <a href="http://yoursite.com/2020/02/23/es6/math/">http://yoursite.com/2020/02/23/es6/math/</a></p><p>Copyright Notice: Please indicate the source of the reprint (must retain the author's signature and link)</p></blockquote></div><div class="tags"></div><div class="post-share"><div class="social-share"><span>Share:</span></div></div><div class="post-nav"><a href="/2020/02/23/es6/object/" class="pre">es6/object</a><a href="/2020/02/22/es6/string/" class="next">es6/string</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contents</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/02/24/es6/Promise/">es6/Promise</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/24/es6/class/">es6/class</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/24/es6/iterator/">es6/iterator</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/24/es6/function/">es6/function</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/23/es6/array/">es6/array</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/23/es6/object/">es6/object</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/23/es6/math/">es6/math</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/22/es6/string/">es6/string</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/22/es6/map_set/">es6/map_set</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/22/es6/symbol/">es6/symbol</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">64</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Site Map</a> |  <a href="/atom.xml">Subscribe to this site</a> |  <a href="/about/">Contact the blogger</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">just coding.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>